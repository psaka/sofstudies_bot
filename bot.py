import telebot
from telebot import types
import os
bot = telebot.TeleBot(os.getenv("BOT_TOKEN"))  # –¢–æ–∫–µ–Ω —Ç–µ–ø–µ—Ä—å –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
CHANNEL_ID = '@sofstudies'

@bot.message_handler(commands=['menu'])
def show_main_menu(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add("–ö–æ–Ω—Å–ø–µ–∫—Ç—ã", "–¢–æ–ø-20 –ø–ª–∞–Ω–æ–≤", "–†–µ—à–∞—Ç—å —Ç–µ—Å—Ç—ã")
    bot.send_message(message.chat.id, "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é! –í—ã–±–∏—Ä–∞–π –ø—É–Ω–∫—Ç –Ω–∏–∂–µ –∏ –ø–æ–µ—Ö–∞–ª–∏!", reply_markup=markup)

# —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–æ–≤–µ—Ä—è—é—â–∞—è –ø–æ–¥–ø–∏—Å–∫—É 
def check_subscription(user_id):
    try:
        member = bot.get_chat_member(CHANNEL_ID, user_id)
        return member.status in ['member', 'administrator', 'creator']
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏: {e}")
        return False

# start
@bot.message_handler(commands=['start'])
def start(message):
        global welcome_text_subcribed
        global welcome_text_unsubcribed
        welcome_text_subcribed = (
            f"ü¶â –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, {message.from_user.first_name}! –Ø –°–æ–≤–∞ –ê—Ñ–∏–Ω–∞, –∏ —è –∑–¥–µ—Å—å, —á—Ç–æ–±—ã —Ç–≤–æ—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠ –ø–æ –æ–±—â–µ—Å—Ç–≤—É –±—ã–ª–∞ –ª–µ–≥—á–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ. üòä\n\n"
            "–ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ:\n\n"
            "‚úÖ –†–µ—à–∏—Ç—å —Ç–µ—Å—Ç—ã ‚Äì –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–π –∑–∞–¥–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ï–ì–≠ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å\n"
            "‚úÖ –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äì –≤—ã–±–∏—Ä–∞–π —Ç–µ–º—É –∏ –ø–æ–ª—É—á–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã ‚úèÔ∏è\n"  
            "‚úÖ –ù–∞–π—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Äì –ó–∞–±—ã–ª —Ç–µ—Ä–º–∏–Ω? –°–ø—Ä–æ—Å–∏ ‚Äì –∏ —è —Ç—É—Ç –∂–µ –ø–æ–¥—Å–∫–∞–∂—É —Ç–æ—á–Ω—É—é —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É! üìñ\n\n"
            "üëá –Ø —Ç—É—Ç —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Ç–≤–æ–π –ø—É—Ç—å –∫ –≤—ã—Å–æ–∫–∏–º –±–∞–ª–ª–∞–º."
        )
        welcome_text_unsubcribed = (
            f"ü¶â –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, {message.from_user.first_name}! –Ø –°–æ–≤–∞ –ê—Ñ–∏–Ω–∞, –∏ —è –∑–¥–µ—Å—å, —á—Ç–æ–±—ã —Ç–≤–æ—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠ –ø–æ –æ–±—â–µ—Å—Ç–≤—É –±—ã–ª–∞ –ª–µ–≥—á–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ. üòä\n\n"
            "–ù–µ —Å—Ç–µ—Å–Ω—è–π—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ:\n\n"
            "‚úÖ –†–µ—à–∏—Ç—å —Ç–µ—Å—Ç—ã ‚Äì –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–π –∑–∞–¥–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ï–ì–≠ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å\n"
            "‚úÖ –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äì –≤—ã–±–∏—Ä–∞–π —Ç–µ–º—É –∏ –ø–æ–ª—É—á–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã ‚úèÔ∏è\n"  
            "‚úÖ –ù–∞–π—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Äì –ó–∞–±—ã–ª —Ç–µ—Ä–º–∏–Ω? –°–ø—Ä–æ—Å–∏ ‚Äì –∏ —è —Ç—É—Ç –∂–µ –ø–æ–¥—Å–∫–∞–∂—É —Ç–æ—á–Ω—É—é —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É! üìñ\n\n"
            "üëá –Ø —Ç—É—Ç —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Ç–≤–æ–π –ø—É—Ç—å –∫ –≤—ã—Å–æ–∫–∏–º –±–∞–ª–ª–∞–º. –ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–æ–µ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π!"
        )
        if check_subscription(message.from_user.id):
            bot.send_message(message.chat.id, welcome_text_subcribed)
            show_main_menu(message.chat.id)
        else:
            show_subscription_request(message.chat.id)

# –ü–æ–∫–∞–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
def show_subscription_request(chat_id):
    markup = types.InlineKeyboardMarkup()
    markup.add(types.InlineKeyboardButton('–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª!', callback_data='nune', url=f"https://t.me/{CHANNEL_ID[1:]}"))
    markup.add(types.InlineKeyboardButton("–Ø —É–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω/–∞!", callback_data="check_subscription"))
    
    bot.send_message(chat_id, 
                    welcome_text_unsubcribed,
                    reply_markup=markup)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
@bot.callback_query_handler(func=lambda call: call.data == "check_subscription")
def check_sub(call):
    if check_subscription(call.from_user.id):
        bot.delete_message(call.message.chat.id, call.message.message_id)
        show_main_menu(call.message.chat.id)
    else:
        bot.answer_callback_query(call.id, "–¢—ã –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω/–∞", show_alert=True)


# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é 
def show_main_menu(chat_id):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add("–ö–æ–Ω—Å–ø–µ–∫—Ç—ã", "–¢–æ–ø-20 –ø–ª–∞–Ω–æ–≤", "–†–µ—à–∞—Ç—å —Ç–µ—Å—Ç—ã")
    bot.send_message(chat_id, "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é! –í—ã–±–∏—Ä–∞–π –ø—É–Ω–∫—Ç –Ω–∏–∂–µ –∏ –ø–æ–µ—Ö–∞–ª–∏!", reply_markup=markup)


@bot.message_handler(func=lambda message: message.text == "–†–µ—à–∞—Ç—å —Ç–µ—Å—Ç—ã")
def tests_start_menu(message):
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    markup.add("—Ç–µ—Å—Ç 1", "—Ç—É—Ç –ø—É—Å—Ç–æ", "–ø—É—Å—Ç–æ..")
    bot.send_message(message.chat.id, "–ö–∞–∫–æ–π —Ç–µ—Å—Ç –±—É–¥–µ–º —Ä–µ—à–∞—Ç—å?", reply_markup=markup)



# –¢–ï–°–¢ 1 
test_1_questions = [
    {
        'question': '''–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä–Ω—ã–µ —Å—É–∂–¥–µ–Ω–∏—è –æ–± –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–∑–Ω–∞–Ω–∏—è, –æ—Ç–ª–∏—á–∞—é—â–∏—Ö –µ–≥–æ –æ—Ç –∏–Ω—ã—Ö –≤–∏–¥–æ–≤ –ø–æ–∑–Ω–∞–Ω–∏—è, –∏ –∑–∞–ø–∏—à–∏—Ç–µ —Ü–∏—Ñ—Ä—ã, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã, –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è.

1) –ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ–∑–Ω–∞–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—É—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.
2) –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–∑–Ω–∞–Ω–∏–µ –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Å–æ–±—Ä–∞–Ω–Ω–æ–π —É—á–µ–Ω—ã–º–∏.
3) –û—Å—É—â–µ—Å—Ç–≤–ª—è—é—â–∏–π —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–∑–Ω–∞–Ω–∏–µ —Å—É–±—ä–µ–∫—Ç –≤–∫–ª—é—á–µ–Ω –≤ –æ–±—ä–µ–∫—Ç –ø–æ–∑–Ω–∞–Ω–∏—è.
4) –°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–∑–Ω–∞–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ—á–Ω—ã—Ö –Ω–∞—É–∫.
5) –í —Å–æ—Ü–∏–∞–ª—å–Ω–æ–º –ø–æ–∑–Ω–∞–Ω–∏–∏ –º–Ω–µ–Ω–∏–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è –≤–ª–∏—è—é—Ç –Ω–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é —Ñ–∞–∫—Ç–æ–≤.''',
        'answer': '35'
    },
    {
        'question': '''–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä–Ω—ã–µ —Å—É–∂–¥–µ–Ω–∏—è –æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ –∏ –∑–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è —Ü–∏—Ñ—Ä—ã, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã.

1) –û—Ç–∫–∞–∑ –æ—Ç –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥ –∏ —Ä–æ—Å—Ç—É –∏—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
2) –í–Ω–µ—à–Ω–µ—Ç–æ—Ä–≥–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–π –æ–±–º–µ–Ω —Ç–æ–≤–∞—Ä–∞–º–∏, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ç–µ–∫—Ü–∏–æ–Ω–∏–∑–º–æ–º.
3) –¢–∞—Ä–∏—Ñ–Ω—ã–µ –∏ –Ω–µ—Ç–∞—Ä–∏—Ñ–Ω—ã–µ –±–∞—Ä—å–µ—Ä—ã –Ω–∞—Ü–µ–ª–µ–Ω—ã –Ω–∞ —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ—Å—Ç–∞ –í–í–ü –∏ –∑–∞—â–∏—Ç—É –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –æ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏.
4) –ö –Ω–µ—Ç–∞—Ä–∏—Ñ–Ω—ã–º –±–∞—Ä—å–µ—Ä–∞–º –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –≤–≤–µ–¥–µ–Ω–∏–µ –∫–≤–æ—Ç –Ω–∞ –∏–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤.
5) –ò–º–ø–æ—Ä—Ç–Ω—ã–µ –ø–æ—à–ª–∏–Ω—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤, –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –∑–∞ —Ä—É–±–µ–∂–æ–º. ''',
        'answer': '34'
    },
    {
        'question': '''–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä–Ω—ã–µ —Å—É–∂–¥–µ–Ω–∏—è –æ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –µ–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ-–ø—Ä–∞–≤–æ–≤—ã—Ö
—Ñ–æ—Ä–º–∞—Ö –∏ –∑–∞–ø–∏—à–∏—Ç–µ —Ü–∏—Ñ—Ä—ã, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã.

1) –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ ‚Äî —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–∞—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥—Ä–∞–∂–¥–∞–Ω –∏ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–∫–æ–Ω—É –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏.
2) –ì—Ä–∞–∂–¥–∞–Ω–∏–Ω –≤–ø—Ä–∞–≤–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –±–µ–∑ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –ª–∏—Ü–∞.
3) –ü—É–±–ª–∏—á–Ω–æ–µ –∞–∫—Ü–∏–æ–Ω–µ—Ä–Ω–æ–µ –æ–±—â–µ—Å—Ç–≤–æ —Ä–∞–∑–º–µ—â–∞–µ—Ç –∞–∫—Ü–∏–∏ –∏ —Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏ –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –ø—É—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–¥–ø–∏—Å–∫–∏.
4) –ö —É–Ω–∏—Ç–∞—Ä–Ω—ã–º —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –ª–∏—Ü–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤—ã –∏ –∞–∫—Ü–∏–æ–Ω–µ—Ä–Ω—ã–µ –æ–±—â–µ—Å—Ç–≤–∞.
5) –ñ–∏–ª–∏—â–Ω—ã–µ, –≥–∞—Ä–∞–∂–Ω—ã–µ, –¥–∞—á–Ω—ã–µ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤—ã –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —è–≤–ª—è—é—Ç—Å—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏. ''',
        'answer': '123'
    }
]

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ 
user_scores = {}
current_question = {}

@bot.message_handler(func=lambda msg: msg.text == "—Ç–µ—Å—Ç 1")
def start_test_1(message):
    user_id = message.from_user.id
    user_scores[user_id] = 0  # –∑–∞–ø—É—Å–∫–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –æ—á–∫–æ–≤
    current_question[user_id] = 0  # –ù–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    
    #  –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    bot.send_message(message.chat.id, f"–í–æ–ø—Ä–æ—Å 1:\n{test_1_questions[0]['question']}")
    bot.register_next_step_handler(message, check_test_1_answer)

def check_test_1_answer(message):
    user_id = message.from_user.id
    question_index = current_question[user_id]
    correct_answer = test_1_questions[question_index]['answer']
    
    if message.text.strip() == correct_answer:
        user_scores[user_id] += 1  
        bot.send_message(message.chat.id, "–ü—Ä–∞–≤–∏–ª—å–Ω–æ!")
    else:
        bot.send_message(message.chat.id, f"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: {correct_answer}")
    
    # –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ—Å—Ç
    current_question[user_id] += 1
    
    if current_question[user_id] < len(test_1_questions):
        # —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
        next_question = test_1_questions[current_question[user_id]]
        bot.send_message(message.chat.id, f"–í–æ–ø—Ä–æ—Å {current_question[user_id]+1}:\n{next_question['question']}")
        bot.register_next_step_handler(message, check_test_1_answer)
    else:
        # –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        total = len(test_1_questions)
        score = user_scores[user_id]
        bot.send_message(message.chat.id, f"–£–º–Ω–∏—á–∫–∞, —Ç—ã –ø—Ä–æ—à–µ–ª —Ç–µ—Å—Ç!!\n–¢—ã –Ω–∞–±—Ä–∞–ª/–∞ {score} –∏–∑ {total} –±–∞–ª–ª–æ–≤")
        
        # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        del user_scores[user_id]
        del current_question[user_id]
        
        show_main_menu(message.chat.id)  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –º–µ–Ω—é





# –ø—Ä–∏–≤–µ—Ç, –ø–æ–∫–∞, —Å–µ–∫—Ä–µ—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Å–≤–æ–∏—Ö. –æ–±—â–∞–ª–∫–∞-—Ä–∞–∑–≤–ª–µ–∫–∞–ª–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–º, –Ω–µ –∫–æ–º–∞–Ω–¥—ã 
@bot.message_handler()
def reply_to_text(message):
    if message.text.lower() == '–ø—Ä–∏–≤–µ—Ç':
        bot.send_message(message.chat.id, f'–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name}!')
    elif message.text.lower() == '–ø–æ–∫–∞':
        bot.reply_to(message, f'–ü–æ–∫–∞, {message.from_user.first_name}!')
    elif message.text.lower() == '–º—è—É':
        bot.send_message(message.chat.id, f'–º—è—É  :3')
    elif message.text.lower() == '1234':
        bot.send_message(message.chat.id, f'—Å—É–ø–µ—Ä —Å–µ–∫—Ä–µ—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Å–≤–æ–∏—Ö')

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ª—é–±—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
@bot.message_handler(func=lambda message: True)
def handle_all_messages(message):
    if not check_subscription(message.from_user.id):
        show_subscription_request(message.chat.id)
    else:
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—ã—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
        pass

if __name__ == '__main__':
    bot.polling(non_stop=True)
